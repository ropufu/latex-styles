\NeedsTeXFormat{LaTeX2e}

\ProvidesPackage{maybedice}[2025/22/05 v0.1 (G Sokolov)]
\PackageInfo{maybedice}{A TiKZ-based package for handling dice}

\RequirePackage{amsmath}
\RequirePackage{ifthen}
\RequirePackage{listofitems}
\RequirePackage{tikz}


% ~~ TikZ styles ~~
\tikzset{maybedice@dotstlye/.style={}}
\tikzset{maybedice@nodestlye/.style={}}
\tikzset{maybedice@borderstlye/.style={}}

\newcommand{\maybediceresetstyles}{
    \tikzset{maybedice@dotstlye/.style={}}
    \tikzset{maybedice@nodestlye/.style={}}
    \tikzset{maybedice@borderstlye/.style={}}
}

\newcommand{\maybedicesetdotstyle}[1]{\tikzset{maybedice@dotstlye/.style={#1}}}
\newcommand{\maybedicesetnodestyle}[1]{\tikzset{maybedice@nodestlye/.style={#1}}}
\newcommand{\maybedicesetborderstyle}[1]{\tikzset{maybedice@borderstlye/.style={#1}}}


% ~~ TikZ geometry ~~
\newcommand{\maybedice@onethirdradius}{0.00980ex}
\newcommand{\maybedice@gridsize}{0.00735ex}
\newcommand{\maybedice@dotfactor}{1}
\newcommand{\maybedice@cornerfactor}{1}
\newcommand{\maybedice@origamistretch}{1}

\newcommand{\maybediceresetgeometry}{
    \renewcommand{\maybedice@dotfactor}{1}
    \renewcommand{\maybedice@cornerfactor}{1}
    \renewcommand{\maybedice@origamistretch}{1}
}

\newcommand{\maybedicesetdotfactor}[1]{\renewcommand{\maybedice@dotfactor}{#1}}
\newcommand{\maybedicesetcornerfactor}[1]{\renewcommand{\maybedice@cornerfactor}{#1}}
\newcommand{\maybedicesetorigamistretch}[1]{\renewcommand{\maybedice@origamistretch}{#1}}


% ~~ Epsdice alternative ~~

\newcommand{\maybe@dicedrawdotat}[2]{
    \fill[maybedice@dotstlye] (#1 * \g, #2 * \g) circle(20 * \maybedice@dotfactor * \maybedice@gridsize);
}

%  -3g    0    3g
%   .-----------. 3g
%   |   |   |   | 2g
%   |---+---+---| g
%   |   |   |   | 0
%   |---+---+---| -g
%   |   |   |   | -2g
%   .-----------. -3g
%
\newcommand{\maybedice}[1]{%
    \begin{tikzpicture}[baseline = {([yshift = -0.7ex] current bounding box.center)}]
        \pgfmathsetmacro{\maybe@good}{0}
        \pgfmathsetmacro{\g}{\maybedice@gridsize}
        \pgfmathsetmacro{\r}{3 * \maybedice@onethirdradius}
        \draw[rounded corners = 30 * \maybedice@cornerfactor * \maybedice@gridsize, maybedice@borderstlye] (-\r, -\r) rectangle (\r, \r);
        % ~~ One dots ~~
        \ifthenelse{\equal{#1}{1}}{%
            \pgfmathsetmacro{\maybe@good}{1}
            \maybe@dicedrawdotat{0}{0};
        }{}
        % ~~ Two dots ~~
        \ifthenelse{\equal{#1}{2}}{%
            \pgfmathsetmacro{\maybe@good}{1}
            \maybe@dicedrawdotat{-2}{-2};
            \maybe@dicedrawdotat{2}{2};
        }{}
        % ~~ Three dots ~~
        \ifthenelse{\equal{#1}{3}}{%
            \pgfmathsetmacro{\maybe@good}{1}
            \maybe@dicedrawdotat{-2}{-2};
            \maybe@dicedrawdotat{0}{0};
            \maybe@dicedrawdotat{2}{2};
        }{}
        % ~~ Four dots ~~
        \ifthenelse{\equal{#1}{4}}{%
            \pgfmathsetmacro{\maybe@good}{1}
            \maybe@dicedrawdotat{-2}{-2};
            \maybe@dicedrawdotat{-2}{2};
            \maybe@dicedrawdotat{2}{-2};
            \maybe@dicedrawdotat{2}{2};
        }{}
        % ~~ Five dots ~~
        \ifthenelse{\equal{#1}{5}}{%
            \pgfmathsetmacro{\maybe@good}{1}
            \maybe@dicedrawdotat{-2}{-2};
            \maybe@dicedrawdotat{-2}{2};
            \maybe@dicedrawdotat{0}{0};
            \maybe@dicedrawdotat{2}{-2};
            \maybe@dicedrawdotat{2}{2};
        }{}
        % ~~ Six dots ~~
        \ifthenelse{\equal{#1}{6}}{%
            \pgfmathsetmacro{\maybe@good}{1}
            \maybe@dicedrawdotat{-2}{-2};
            \maybe@dicedrawdotat{-2}{0};
            \maybe@dicedrawdotat{-2}{2};
            \maybe@dicedrawdotat{2}{-2};
            \maybe@dicedrawdotat{2}{0};
            \maybe@dicedrawdotat{2}{2};
        }{}
        % ~~ Seven dots ~~
        \ifthenelse{\equal{#1}{7}}{%
            \pgfmathsetmacro{\maybe@good}{1}
            \maybe@dicedrawdotat{-2}{-2};
            \maybe@dicedrawdotat{-2}{0};
            \maybe@dicedrawdotat{-2}{2};
            \maybe@dicedrawdotat{0}{0};
            \maybe@dicedrawdotat{2}{-2};
            \maybe@dicedrawdotat{2}{0};
            \maybe@dicedrawdotat{2}{2};
        }{}
        % ~~ Eight dots ~~
        \ifthenelse{\equal{#1}{8}}{%
            \pgfmathsetmacro{\maybe@good}{1}
            \maybe@dicedrawdotat{-2}{-2};
            \maybe@dicedrawdotat{-2}{0};
            \maybe@dicedrawdotat{-2}{2};
            \maybe@dicedrawdotat{0}{-2};
            \maybe@dicedrawdotat{0}{2};
            \maybe@dicedrawdotat{2}{-2};
            \maybe@dicedrawdotat{2}{0};
            \maybe@dicedrawdotat{2}{2};
        }{}
        % ~~ Nine dots ~~
        \ifthenelse{\equal{#1}{9}}{%
            \pgfmathsetmacro{\maybe@good}{1}
            \maybe@dicedrawdotat{-2}{-2};
            \maybe@dicedrawdotat{-2}{0};
            \maybe@dicedrawdotat{-2}{2};
            \maybe@dicedrawdotat{0}{-2};
            \maybe@dicedrawdotat{0}{0};
            \maybe@dicedrawdotat{0}{2};
            \maybe@dicedrawdotat{2}{-2};
            \maybe@dicedrawdotat{2}{0};
            \maybe@dicedrawdotat{2}{2};
        }{}
        \ifthenelse{\equal{\maybe@good}{1}}{}{\PackageError{maybe}{Die value of #1 not supported}{\protect\maybedice\space only supports values 1--9.}}
    \end{tikzpicture}
} % \maybedice

\newcommand{\maybevardice}[1]{%
    \begin{tikzpicture}[baseline = {([yshift = -0.7ex] current bounding box.center)}]
        \pgfmathsetmacro{\maybe@good}{0}
        \pgfmathsetmacro{\g}{\maybedice@gridsize}
        \pgfmathsetmacro{\r}{3 * \maybedice@onethirdradius}
        \draw[rounded corners = 30 * \maybedice@cornerfactor * \maybedice@gridsize, maybedice@borderstlye] (-\r, -\r) rectangle (\r, \r);
        % ~~ One dots ~~
        \ifthenelse{\equal{#1}{1}}{%
            \pgfmathsetmacro{\maybe@good}{1}
            \maybe@dicedrawdotat{0}{0};
        }{}
        % ~~ Two dots ~~
        \ifthenelse{\equal{#1}{2}}{%
            \pgfmathsetmacro{\maybe@good}{1}
            \maybe@dicedrawdotat{-2}{2};
            \maybe@dicedrawdotat{2}{-2};
        }{}
        % ~~ Three dots ~~
        \ifthenelse{\equal{#1}{3}}{%
            \pgfmathsetmacro{\maybe@good}{1}
            \maybe@dicedrawdotat{-2}{2};
            \maybe@dicedrawdotat{0}{0};
            \maybe@dicedrawdotat{2}{-2};
        }{}
        % ~~ Four dots ~~
        \ifthenelse{\equal{#1}{4}}{%
            \pgfmathsetmacro{\maybe@good}{1}
            \maybe@dicedrawdotat{-2}{0};
            \maybe@dicedrawdotat{0}{-2};
            \maybe@dicedrawdotat{0}{2};
            \maybe@dicedrawdotat{2}{0};
        }{}
        % ~~ Five dots ~~
        \ifthenelse{\equal{#1}{5}}{%
            \pgfmathsetmacro{\maybe@good}{1}
            \maybe@dicedrawdotat{-2}{0};
            \maybe@dicedrawdotat{0}{-2};
            \maybe@dicedrawdotat{0}{0};
            \maybe@dicedrawdotat{0}{2};
            \maybe@dicedrawdotat{2}{0};
        }{}
        % ~~ Six dots ~~
        \ifthenelse{\equal{#1}{6}}{%
            \pgfmathsetmacro{\maybe@good}{1}
            \maybe@dicedrawdotat{-2}{-2};
            \maybe@dicedrawdotat{-2}{2};
            \maybe@dicedrawdotat{0}{-2};
            \maybe@dicedrawdotat{0}{2};
            \maybe@dicedrawdotat{2}{-2};
            \maybe@dicedrawdotat{2}{2};
        }{}
        % ~~ Seven dots ~~
        \ifthenelse{\equal{#1}{7}}{%
            \pgfmathsetmacro{\maybe@good}{1}
            \maybe@dicedrawdotat{-2}{-2};
            \maybe@dicedrawdotat{-2}{2};
            \maybe@dicedrawdotat{0}{-2};
            \maybe@dicedrawdotat{0}{0};
            \maybe@dicedrawdotat{0}{2};
            \maybe@dicedrawdotat{2}{-2};
            \maybe@dicedrawdotat{2}{2};
        }{}
        % ~~ Eight dots ~~
        \ifthenelse{\equal{#1}{8}}{%
            \pgfmathsetmacro{\maybe@good}{1}
            \maybe@dicedrawdotat{-2}{-2};
            \maybe@dicedrawdotat{-2}{0};
            \maybe@dicedrawdotat{-2}{2};
            \maybe@dicedrawdotat{0}{-2};
            \maybe@dicedrawdotat{0}{2};
            \maybe@dicedrawdotat{2}{-2};
            \maybe@dicedrawdotat{2}{0};
            \maybe@dicedrawdotat{2}{2};
        }{}
        % ~~ Nine dots ~~
        \ifthenelse{\equal{#1}{9}}{%
            \pgfmathsetmacro{\maybe@good}{1}
            \maybe@dicedrawdotat{-2}{-2};
            \maybe@dicedrawdotat{-2}{0};
            \maybe@dicedrawdotat{-2}{2};
            \maybe@dicedrawdotat{0}{-2};
            \maybe@dicedrawdotat{0}{0};
            \maybe@dicedrawdotat{0}{2};
            \maybe@dicedrawdotat{2}{-2};
            \maybe@dicedrawdotat{2}{0};
            \maybe@dicedrawdotat{2}{2};
        }{}
        \ifthenelse{\equal{\maybe@good}{1}}{}{\PackageError{maybe}{Die value of #1 not supported}{\protect\maybedice\space only supports values 1--9.}}
    \end{tikzpicture}
} % \maybevardice


% ~~ Origami ~~

% ~~ Six-sided dice unwrapped ~~
%          .---.
%          |#5 |
%  .---.---.---.---.
%  |#1 |#2 |#3 |#4 |
%  .---.---.---.---.
%          |#6 |
%          .---.
%
\newcommand{\maybe@tinyorigamidice}[1]{
    \begin{tikzpicture}[baseline = {([yshift = -0.7ex] current bounding box.center)}]
        \readlist\maybe@temp@list{#1}
        \pgfmathtruncatemacro{\maybe@sides}{\maybe@temp@listlen}
        \pgfmathsetmacro{\maybe@good}{0}
        \pgfmathsetmacro{\r}{3 * \maybedice@onethirdradius}
        % ~~ d6 ~~
        \ifthenelse{\equal{\maybe@sides}{6}}{%
            \pgfmathsetmacro{\maybe@good}{1}
            \draw[maybedice@borderstlye] (-5 * \r, \r) -- (3 * \r, \r) -- (3 * \r, -\r) -- (-5 * \r, -\r) -- (-5 * \r, \r);
            \draw[maybedice@borderstlye] (-\r, 3 * \r) -- (\r, 3 * \r) -- (\r, -3 * \r) -- (-\r, -3 * \r) -- (-\r, 3 * \r);
            \draw[maybedice@borderstlye] (-3 * \r, \r) -- (-3 * \r, -\r);
        	\foreach \i in {0, ..., 3} {
                \pgfmathparse{{#1}[\i]};
                \let\maybe@label\pgfmathresult;
                \draw (-4 * \r + 2 * \r * \i, 0) node[maybedice@nodestlye] {\tiny\maybe@label};
            } % \foreach

            \pgfmathparse{{#1}[4]};
            \let\maybe@label\pgfmathresult;
            \draw (0, 2 * \r) node[maybedice@nodestlye] {\tiny\maybe@label};

            \pgfmathparse{{#1}[5]};
            \let\maybe@label\pgfmathresult;
            \draw (0, -2 * \r) node[maybedice@nodestlye] {\tiny\maybe@label};
        }{}
        \ifthenelse{\equal{\maybe@good}{1}}{}{\PackageError{maybe}{Dice with \maybe@sides\space sides not supported}{\protect\maybeorigamidice\space only supports d6.}}
    \end{tikzpicture}
} % \maybe@tinyorigamidice

\newcommand{\maybetinyorigamidiestd}{\maybe@tinyorigamidice{2, 3, 5, 4, 6, 1}}
\newcommand{\maybetinyorigamidice}[1]{\maybe@tinyorigamidice{#1}}

% ~~ Six-sided dice unwrapped ~~
%          .---.
%          |#5 |
%  .---.---.---.---.
%  |#1 |#2 |#3 |#4 |
%  .---.---.---.---.
%          |#6 |
%          .---.
%
\newcommand{\maybeorigamidice}[1]{
    \begin{tikzpicture}[baseline = {([yshift = -0.7ex] current bounding box.center)}]
        \readlist\maybe@temp@list{#1}
        \pgfmathtruncatemacro{\maybe@sides}{\maybe@temp@listlen}
        \pgfmathsetmacro{\maybe@good}{0}
        \pgfmathsetmacro{\r}{9 * \maybedice@gridsize * \maybedice@origamistretch}
        % ~~ d6 ~~
        \ifthenelse{\equal{\maybe@sides}{6}}{%
            \pgfmathsetmacro{\maybe@good}{1}
            \draw[maybedice@borderstlye] (-5 * \r, \r) -- (3 * \r, \r) -- (3 * \r, -\r) -- (-5 * \r, -\r) -- (-5 * \r, \r);
            \draw[maybedice@borderstlye] (-\r, 3 * \r) -- (\r, 3 * \r) -- (\r, -3 * \r) -- (-\r, -3 * \r) -- (-\r, 3 * \r);
            \draw[maybedice@borderstlye] (-3 * \r, \r) -- (-3 * \r, -\r);
        	\foreach \i in {0, ..., 3} {
                \pgfmathparse{{#1}[\i]};
                \let\maybe@label\pgfmathresult;
                \draw (-4 * \r + 2 * \r * \i, 0) node[maybedice@nodestlye] {\maybe@label};
            } % \foreach

            \pgfmathparse{{#1}[4]};
            \let\maybe@label\pgfmathresult;
            \draw (0, 2 * \r) node[maybedice@nodestlye] {\maybe@label};

            \pgfmathparse{{#1}[5]};
            \let\maybe@label\pgfmathresult;
            \draw (0, -2 * \r) node[maybedice@nodestlye] {\maybe@label};
        }{}
        \ifthenelse{\equal{\maybe@good}{1}}{}{\PackageError{maybe}{Dice with \maybe@sides\space sides not supported}{\protect\maybeorigamidice\space only supports d6.}}
    \end{tikzpicture}
}
